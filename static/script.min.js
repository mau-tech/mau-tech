window.addEventListener("load",()=>{quicklink.listen()});let good=0,bad=0,url="https://script.google.com/macros/s/AKfycbzr7POkqR-9iXI_8ph6Rskx7O-GKNddUy2DObZoKV9UEqN3L7V3/exec?post="+title;function hidden(){document.hidden&&open()}once=function(e){let t=!1,o=void 0;return function(){return t||(o=e.apply(this,arguments),t=!0),o}},voting=once((function(e){"good"==e?(good+=1,goodElem.classList.add("stop")):(bad+=1,badElem.classList.add("stop")),stop(),fetch(url+"&voting="+e),localStorage.setItem(title,"voting")})),fetch(url).then(e=>e.json()).then(e=>{good=Number(e.good),bad=Number(e.bad),localStorage.getItem(title)&&stop()}),setTimeout("open();",15e3),document.addEventListener("visibilitychange",hidden,!1),window.onload=function(){new IntersectionObserver((function(e){for(entry of e)entry.isIntersecting?fixed.classList.contains("fixed")&&fixed.classList.remove("fixed"):fixed.classList.contains("fixed")||fixed.classList.add("fixed")})).observe(header)};let img=document.querySelectorAll("main picture"),jpeg=document.getElementById("lightbox-jpeg"),webp=document.getElementById("lightbox-webp"),figcaption=document.getElementById("lightbox-figcaption"),lightbox=document.getElementById("lightbox");var LbObserver=new IntersectionObserver(handle);function handle(e){e.forEach((function(e){e.intersectionRatio&&(lbClose(),LbObserver.disconnect())}))}for(let e=0;e<img.length;++e)img[e].onclick=function(){let e=this.dataset.original,t=this.dataset.figcaption;webp.srcset=e+".webp",jpeg.src=e+".jpg",figcaption.innerHTML=t,lightbox.classList.add("open"),lightbox.classList.remove("close"),Top.style.top=pageYOffset-100+"px",Bottom.style.top=pageYOffset+innerHeight+100+"px",LbObserver.observe(Top),LbObserver.observe(Bottom)};function lbClose(){lightbox.classList.add("close"),lightbox.classList.remove("open"),setTimeout("lbDelete();",500)}function lbDelete(){webp.srcset="data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7",jpeg.src="data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7"}function open(){Voting.classList.add("hover")}function block(){Voting.classList.remove("hover"),setTimeout("Voting.classList.remove('normal');Close.classList.add('normal');",1e3)}function stop(){goodElem.innerHTML=String(good),badElem.innerHTML=String(bad),goodElem.classList.add("done"),badElem.classList.add("done"),votingText.innerHTML="ありがとうございます！",setTimeout("Voting.classList.remove('hover');",500)}lightbox.onclick=lbClose,document.onkeydown=function(e){27==e.keyCode&&lbClose()};